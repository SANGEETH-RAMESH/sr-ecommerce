<%-include('../layouts/header.ejs')%>
    <!-- mini cart start -->

    <div class="slider-area">
        <div class="slider-active swiper-container">
            <div class="swiper-wrapper">
                <div class="swiper-slide">
                    <div class="intro-section slider-height-1 slider-content-center bg-img single-animation-wrap slider-bg-color-1"
                        style="background-image:url(assets/images/slider/slider-bg-1.jpg)">
                        <div class="container">
                            <div class="row align-items-center">
                                <div class="col-lg-6 col-md-6">
                                    <div class="slider-content-1 slider-animated-1">
                                        <h3 class="animated">new arrival</h3>
                                        <h1 class="animated">Summer <br>Collection</h1>
                                        <div class="slider-btn btn-hover">
                                            <a href="shop   " class="btn animated">Shop Now <i
                                                    class="ti-arrow-right"></i></a>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-6 col-md-6 order-first order-md-last"
                                    style="height: 300px; width: 200px; margin-left: 250px;">
                                    <div class="hero-slider-img-1 slider-animated-1" style="width: 300px;">
                                        <img class="animated animated-slider-img-1" src="/assets/images/slider/2.png"
                                            height="350px" alt="">
                                        <div class="product-offer animated">
                                            <h5>30% <span>Off</span></h5>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="swiper-slide">
                    <div class="intro-section slider-height-1 slider-content-center bg-img single-animation-wrap slider-bg-color-1"
                        style="background-image:url(assets/images/slider/slider-bg-1.jpg)">
                        <div class="container">
                            <div class="row align-items-center">
                                <div class="col-lg-6 col-md-6">
                                    <div class="slider-content-1 slider-animated-1">
                                        <h3 class="animated">new arrival</h3>
                                        <h1 class="animated">Summer <br>Collection</h1>
                                        <div class="slider-btn btn-hover">
                                            <a href="shop" class="btn animated">
                                                Shop Now <i class=" ti-arrow-right "></i>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-6 col-md-6" style="height: 300px; width: 200px; margin-left: 250px;">
                                    <div class="hero-slider-img-1 slider-animated-1" style="width: 250px;">
                                        <img class="animated animated-slider-img-1" src="/assets/images/slider/3.png"
                                            height="350px" alt="">
                                        <div class="product-offer animated">
                                            <h5>30% <span>Off</span></h5>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="home-slider-prev main-slider-nav"><i class="fa fa-angle-left"></i></div>
                <div class="home-slider-next main-slider-nav"><i class="fa fa-angle-right"></i></div>
            </div>
        </div>
    </div>

    <div class="product-area pb-95">
        <div class="container">
            <div class="section-border section-border-margin-1" data-aos="fade-up" data-aos-delay="200">
                <div class="section-title-timer-wrap bg-white">
                    <div class="section-title-1">
                        <h2>Deal Of The Day</h2>
                    </div>
                    <div id="timer-1-active" class="timer-style-1">
                        <span>End In: </span>
                        <div data-countdown="2023/8/30"></div>
                    </div>
                </div>
            </div>
            <div class="product-slider-active-1 swiper-container">
                <div class="swiper-wrapper">
                    <%Product.forEach(products=>{%>
                        <div class="swiper-slide">
                            <div class="product-wrap" data-aos="fade-up" data-aos-delay="400">
                                <div class="product-img img-zoom mb-25"
                                    style="background-color: #e9ecef; width: 250px;">

                                    <a href="/singleproduct/<%=products._id%>">
                                        <img src="/uploads/product/<%=products.image[0]%>" alt="">
                                    </a>
                                    <div class="product-action-wrap">

                                        <a class="product-action-btn-1" id="<%= products._id%>" title="Wishlist"
                                            onclick="checkLoginAndAddWishlist(this.id)"><i class="pe-7s-like"></i></a>

                                        <button class="product-action-btn-1" title="Quick View" data-bs-toggle="modal"
                                            data-bs-target="#exampleModal">
                                            <i class="pe-7s-look"></i>
                                        </button>
                                    </div>
                                    <div class="product-action-2-wrap">
                                        <span></span>
                                        <% if (products.quantity> 0) { %>
                                            <button onclick="checkLoginAndAddToCart('<%= products._id %>')"
                                                class="product-action-btn-2" title="Add To Cart">
                                                <i class="pe-7s-cart"></i> Add to cart
                                            </button>
                                            <% } else { %>

                                                <button class="product-action-btn-2" style="background-color: red;"
                                                    title="Add To Cart">
                                                    <i class="pe-7s-cart"></i> Out of Stock
                                                </button>
                                                <% } %>
                                    </div>
                                </div>
                                <div class="product-content">
                                    <h3><a href="#">
                                            <%=products.productname%>
                                        </a></h3>
                                    <div class="product-price">
                                        <span class="new-price" style="color: green;">
                                            <% if (products?.offer?.offer) { %>
                                                <% var finalPrice=products.price; %>

                                                    <% if ( products?.categoryId?.Offer?.offer> products?.offer?.offer)
                                                        { %>

                                                        <%
                                                            finalPrice=products.price-((products.categoryId.Offer.offer*products.price)/100)%>
                                                            <% } else { %>

                                                                <% finalPrice=products.price - (products.price *
                                                                    (products?.offer?.offer / 100)); %>
                                                                    <% } %>
                                                                        <span class="old-price">$ <%= products.price %>
                                                                                </span>
                                                                        <span class="new-price">$ <%= finalPrice %>
                                                                                </span>
                                                                        <% } else if (products.categoryId.Offer) { %>
                                                                            <%var newTotal=products.price%>
                                                                                <% var newTotal=products.price -
                                                                                    (products.price *
                                                                                    (products?.categoryId.Offer.offer/
                                                                                    100)); %>

                                                                                    <span class="old-price">$ <%=
                                                                                            products.price %></span>
                                                                                    <span class="new-price">$ <%=
                                                                                            newTotal %></span>
                                                                                    <% } else { %>
                                                                                        <span class="regular-price">$
                                                                                            <%= products.price %></span>
                                                                                        <% } %>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <%})%>
                            <!-- <div class="swiper-slide">
                            <div class="product-wrap" data-aos="fade-up" data-aos-delay="600">
                                <div class="product-img img-zoom mb-25">
                                    <a href="#">
                                        <img src="assets/images/product/product2.jpg" alt="">
                                    </a>
                                    <div class="product-badge badge-top badge-right badge-pink">
                                        <span>-10%</span>
                                    </div>
                                    <div class="product-action-wrap">
                                        <button class="product-action-btn-1" title="Wishlist"><i class="pe-7s-like"></i></button>
                                        <button class="product-action-btn-1" title="Quick View" data-bs-toggle="modal" data-bs-target="#exampleModal">
                                            <i class="pe-7s-look"></i>
                                        </button>
                                    </div>
                                    <div class="product-action-2-wrap">
                                        <button class="product-action-btn-2" title="Add To Cart"><i class="pe-7s-cart"></i> Add to cart</button>
                                    </div>
                                </div>
                                <div class="product-content">
                                    <h3><a href="#">Patek Philippe</a></h3>
                                    <div class="product-price">
                                        <span class="old-price">$45.00 </span>
                                        <span class="new-price">$40.00 </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="swiper-slide">
                            <div class="product-wrap" data-aos="fade-up" data-aos-delay="800">
                                <div class="product-img img-zoom mb-25">
                                    <a href="#">
                                        <img src="assets/images/product/product3.jpg" alt="">
                                    </a>
                                    <div class="product-action-wrap">
                                        <button class="product-action-btn-1" title="Wishlist"><i class="pe-7s-like"></i></button>
                                        <button class="product-action-btn-1" title="Quick View" data-bs-toggle="modal" data-bs-target="#exampleModal">
                                            <i class="pe-7s-look"></i>
                                        </button>
                                    </div>
                                    <div class="product-action-2-wrap">
                                        <button class="product-action-btn-2" title="Add To Cart"><i class="pe-7s-cart" ></i> Add to cart</button>
                                    </div>
                                </div>
                                <div class="product-content">
                                    <h3><a href="#">Cartier</a></h3>
                                    <div class="product-price">
                                        <span>$30.25 </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="swiper-slide">
                            <div class="product-wrap" data-aos="fade-up" data-aos-delay="1000">
                                <div class="product-img img-zoom mb-25">
                                    <a href="#">
                                        <img src="assets/images/product/product4.jpg" alt="">
                                    </a>
                                    <div class="product-badge badge-top badge-right badge-pink">
                                        <span>-10%</span>
                                    </div>
                                    <div class="product-action-wrap">
                                        <button class="product-action-btn-1" title="Wishlist"><i class="pe-7s-like"></i></button>
                                        <button class="product-action-btn-1" title="Quick View" data-bs-toggle="modal" data-bs-target="#exampleModal">
                                            <i class="pe-7s-look"></i>
                                        </button>
                                    </div>
                                    <div class="product-action-2-wrap">
                                        <button class="product-action-btn-2" title="Add To Cart"><i class="pe-7s-cart"></i> Add to cart</button>
                                    </div>
                                </div>
                                <div class="product-content">
                                    <h3><a href="#">New Modern Sofa Set</a></h3>
                                    <div class="product-price">
                                        <span class="old-price">$80.50 </span>
                                        <span class="new-price">$75.25 </span>
                                    </div>
                                </div>
                            </div>
                        </div> -->
                </div>
                <div class="product-prev-1 product-nav-1" data-aos="fade-up" data-aos-delay="200"><i
                        class="fa fa-angle-left"></i></div>
                <div class="product-next-1 product-nav-1" data-aos="fade-up" data-aos-delay="200"><i
                        class="fa fa-angle-right"></i></div>
            </div>
        </div>
    </div>



    <div class="product-area pb-100">
        <div class="container">
            <div class="row">
                <div class="col-lg-6 col-md-6">
                    <div class="home-single-product-img" data-aos="fade-up" data-aos-delay="200" style="width: 300px;">
                        <a href="#"><img src="/uploads/product/<%=products[0].image[0]%>" alt=""></a>
                    </div>
                </div>
                <div class="col-lg-6 col-md-6">
                    <div class="home-single-product-content">

                        <h2 data-aos="fade-up" data-aos-delay="200">
                            <%=products[0].productname%>
                        </h2>

                        <h3 class="new-price" style="color: green;">
                            <% if (products[0]?.offer?.offer) { %>
                                <% var finalPrice=products[0].price; %>

                                    <% if ( products[0]?.categoryId?.Offer?.offer> products[0]?.offer?.offer) { %>

                                        <%
                                            finalPrice=products[0].price-((products[0].categoryId.Offer.offer*products[0].price)/100)%>
                                            <% } else { %>

                                                <% finalPrice=products[0].price - (products[0].price *
                                                    (products[0]?.offer?.offer / 100)); %>
                                                    <% } %>

                                                        <h3 class="new-price">$ <%= finalPrice %>
                                                        </h3>
                                                        <% } else if (products[0].categoryId.Offer) { %>
                                                            <%var newTotal=products[0].price%>
                                                                <% var newTotal=products[0].price - (products[0].price *
                                                                    (products[0]?.categoryId.Offer.offer/ 100)); %>


                                                                    <h3 class="new-price"> $ <%= newTotal %>
                                                                    </h3>
                                                                    <% } else { %>
                                                                        <h3 class="regular-price">$ <%=
                                                                                products[0].price %>
                                                                        </h3>
                                                                        <% } %>
                        </h3>
                        <p data-aos="fade-up" data-aos-delay="600" >
                            <%=products[0].description%>
                        </p>
                        
                        
                        <div class="product-details-action-wrap" data-aos="fade-up" data-aos-delay="1000">


                            <div class="single-product-cart btn-hover" style="margin-top: 20px;">
                                <% if (products[0].quantity> 0) { %>
                                    <a href="#" onclick="checkLoginAndAddToCart('<%= products[0]._id %>')"
                                        class="product-action-btn-2" title="Add To Cart">
                                        <i class="pe-7s-cart"></i>Add to cart</a>
                                    <% } else { %>
                                        <a href="#" class="product-action-btn-2" style="background-color: red;"
                                             title="Add To Cart">
                                            <i class="pe-7s-cart"></i> Out of Stock
                                        </a>
                                        <% } %>
                            </div>
                            <div class="single-product-wishlist">
                                <a class="product-action-btn-1" id="<%= products[0]._id%>" title="Wishlist"
                                    onclick="checkLoginAndAddWishlist(this.id)"><i class="pe-7s-like"></i></a>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <div class="brand-logo-area pb-95">
        <div class="container">
            <div class="brand-logo-active swiper-container">
                <div class="swiper-wrapper">
                    <div class="swiper-slide">
                        <div class="single-brand-logo" data-aos="fade-up" data-aos-delay="200">
                            <a href="#"><img src="assets/images/brand-logo/fossil.png" alt=""></a>
                        </div>
                    </div>
                    <div class="swiper-slide">
                        <div class="single-brand-logo" data-aos="fade-up" data-aos-delay="400">
                            <a href="#"><img src="assets/images/brand-logo/cr7.png" alt=""></a>
                        </div>
                    </div>
                    <div class="swiper-slide">
                        <div class="single-brand-logo" data-aos="fade-up" data-aos-delay="600">
                            <a href="#"><img src="assets/images/brand-logo/rubber b.png" alt=""></a>
                        </div>
                    </div>
                    <div class="swiper-slide">
                        <div class="single-brand-logo" data-aos="fade-up" data-aos-delay="800">
                            <a href="#"><img src="assets/images/brand-logo/rolex.png" alt=""></a>
                        </div>
                    </div>
                    <div class="swiper-slide">
                        <div class="single-brand-logo" data-aos="fade-up" data-aos-delay="1000">
                            <a href="#"><img src="assets/images/brand-logo/Titan.png" alt=""></a>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>

    <%-include('../layouts/footer.ejs')%>
        <!-- Product Modal start -->

        </div>
        <!-- All JS is here -->
        <script>
            function checkLoginAndAddToCart(ProductElement) {
                // Check if user is logged in
                if ("<%= req.session._id %>" === null || "<%= req.session._id %>" === "") {
                    // User is not logged in, display SweetAlert alert
                    window.location.href = '/login'
                } else {
                    // User is logged in, proceed with adding to cart
                    AddToCart(ProductElement);
                }
            }

            function AddToCart(ProductElement) {
                fetch('/addtocart', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ id: ProductElement })
                })
                    .then(response => {
                        if (!response.ok) {
                            throw new Error('Network response was not ok');
                        }
                        return response.json();
                    })
                    .then(data => {
                        // Show success alert using SweetAlert
                        if (data.message === "Product Already Added to cart") {
                            const Toast = Swal.mixin({
                                toast: true,
                                position: "top",
                                showConfirmButton: false,
                                timer: 1500,
                                timerProgressBar: true,
                                didOpen: (toast) => {
                                    toast.onmouseenter = Swal.stopTimer;
                                    toast.onmouseleave = Swal.resumeTimer;
                                }
                            });
                            Toast.fire({
                                icon: "warning",
                                title: "Product Already Added to Cart",
                                width:'400'
                            });
                        } else if (data.message === "Product Added to cart") {
                            const Toast = Swal.mixin({
                                toast: true,
                                position: "top",
                                showConfirmButton: false,
                                timer: 1500,
                                timerProgressBar: true,
                                didOpen: (toast) => {
                                    toast.onmouseenter = Swal.stopTimer;
                                    toast.onmouseleave = Swal.resumeTimer;
                                }
                            });
                            Toast.fire({
                                icon: "success",
                                title: "Product Added to Cart",
                                width:'400'
                            });
                        }
                    })
                    .catch(error => {
                        console.log('There was a problem with the fetch operation', error);
                    });
            }
        </script>
        <script>
            function checkLoginAndAddWishlist(productId) {
                // Check if user is logged in
                if ("<%= req.session._id %>" === null || "<%= req.session._id %>" === "") {
                    // User is not logged in, display SweetAlert alert
                    window.location.href = '/login'
                } else {
                    // User is logged in, proceed with adding to cart\
                    console.log('2')
                    addToWishlist(productId);
                }
            }
            function addToWishlist(productId) {
                fetch('/addtowishlist', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ productId })
                })
                    .then(response => {
                        if (!response.ok) {
                            throw new Error('Network response was not ok');
                        }
                        return response.json();
                    })
                    .then(data => {
                        // Show success alert using SweetAlert
                        if (data.message === "Product Already Added to Wishlist") {
                            const Toast = Swal.mixin({
                                toast: true,
                                position: "top",
                                showConfirmButton: false,
                                timer: 1500,
                                timerProgressBar: true,
                                didOpen: (toast) => {
                                    toast.onmouseenter = Swal.stopTimer;
                                    toast.onmouseleave = Swal.resumeTimer;
                                }
                            });
                            Toast.fire({
                                icon: "warning",
                                title: "Product Already Added to Wishlist",
                                width:'400'
                            });
                        } else if (data.message === "Product Added to Wislist") {
                            const Toast = Swal.mixin({
                                toast: true,
                                position: "top",
                                showConfirmButton: false,
                                timer: 1500,
                                timerProgressBar: true,
                                didOpen: (toast) => {
                                    toast.onmouseenter = Swal.stopTimer;
                                    toast.onmouseleave = Swal.resumeTimer;
                                }
                            });
                            Toast.fire({
                                icon: "success",
                                title: "Product Added to Wislist",
                                width:'400'
                            });
                        }
                    })
                    .catch(error => {
                        console.log('There was a problem with the fetch operation', error);
                    });
            }
        </script>
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
        <script src="assets/js/vendor/modernizr-3.11.7.min.js"></script>
        <script src="assets/js/vendor/jquery-3.6.0.min.js"></script>
        <script src="assets/js/vendor/jquery-migrate-3.3.2.min.js"></script>
        <script src="assets/js/vendor/popper.min.js"></script>
        <script src="assets/js/vendor/bootstrap.min.js"></script>
        <script src="assets/js/plugins/wow.js"></script>
        <script src="assets/js/plugins/scrollup.js"></script>
        <script src="assets/js/plugins/aos.js"></script>
        <script src="assets/js/plugins/magnific-popup.js"></script>
        <script src="assets/js/plugins/jquery.syotimer.min.js"></script>
        <script src="assets/js/plugins/swiper.min.js"></script>
        <script src="assets/js/plugins/imagesloaded.pkgd.min.js"></script>
        <script src="assets/js/plugins/isotope.pkgd.min.js"></script>
        <script src="assets/js/plugins/jquery-ui.js"></script>
        <script src="assets/js/plugins/jquery-ui-touch-punch.js"></script>
        <script src="assets/js/plugins/jquery.nice-select.min.js"></script>
        <script src="assets/js/plugins/waypoints.min.js"></script>
        <script src="assets/js/plugins/jquery.counterup.js"></script>
        <script src="assets/js/plugins/select2.min.js"></script>
        <script src="assets/js/plugins/easyzoom.js"></script>
        <script src="assets/js/plugins/slinky.min.js"></script>
        <script src="assets/js/plugins/ajax-mail.js"></script>
        <!-- Main JS -->
        <script src="assets/js/main.js"></script>
        </body>


        <!-- Mirrored from htmldemo.net/urdan/urdan/index.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 17 Jan 2024 09:29:53 GMT -->

        </html>